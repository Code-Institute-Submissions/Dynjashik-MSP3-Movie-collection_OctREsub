{% extends "base.html" %}
{% block content %}

    <h3 class="center-align">All Movies</h3>


    <!--Search Box-->
    <form class="search-input" action="{{ url_for('search') }}" method="POST">
        <input type="search" placeholder="Search Movie..." name="query" id="query">
        <div class="search-btns">
            <button type="submit" class="waves-effect waves-light btn"><i class="fas fa-search"></i></button>
            <a href="{{ url_for('movie_page') }}" class="btn cb-btn--back" >Back to all movies</a>
        </div>
    </form>

    <div class="category-menu">
        <a class="waves-effect waves-light btn">All movies</a>
     <!--Categories Menu -->   
        {% for category in categories %} 
            <a class="waves-effect waves-light btn">{{ category.category_name }}</a>
        {% endfor %}
    </div>

    {% if movies|length > 0 %}
    <!--Movie cards-->
    <div class="row">
        <ul class="movie-cards">
            {% for movie in movies %}
            <li class="col s12 m4 card small">
                <div class="card-image waves-effect waves-block waves-light">
                <img class="activator" src="{{ url_for('static', filename='images/movie_img.png') }}" data-tooltip="See more">
                </div>
                <div class="card-content">
                <span class="card-title activator grey-text text-darken-4">{{ movie.movie_name }}</span>
                {% if session.user|lower == movie.created_by|lower %}
                    <a href="{{ url_for('edit_movie', movie_id=movie._id) }}" class="btn">Edit</a>
                    <a href="{{ url_for('delete_movie', movie_id=movie._id) }}" class="btn red">Delete</a>
                {% endif %}
                </div>
                <div class="card-reveal">
                <span class="card-title grey-text text-darken-4"><i class="material-icons right">close</i>
                    {{ movie.movie_name }} <br>
                    <strong>Category: </strong>{{ movie.category_name }}<br>
                    <strong>Year: </strong>{{ movie.year }}<br>
                    <strong>Duration (min): </strong>{{ movie.movie_duration }}<br>
                    <strong>Book link: </strong> <a href="{{ movie.book_link }}" class="collection-item">follow the link</a><br>
                    <strong>Description: </strong>{{ movie.movie_description }}<br>
                    <p><em>by: {{ movie.created_by }}</em></p>
                </span>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>

    {% else %}
        <h3 class="red-text text-darken-4 center-align">No Results Found</h3>
    {% endif %}

{% endblock %}