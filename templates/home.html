{% extends "base.html" %}
{% block content %}

<!--Home page image-->
<div class="background-img">
    <img src="{{ url_for('static', filename='images/background-img.jpg') }}" alt="movie and books">
</div>

<main class="container">
    <h3 class="recently-added center-align">Recently added movies</h3>
    <!--Movie cards-->
    <div class="row">
        <ul class="movie-cards">
            {% for movie in recently_added_movies %}
            <li class="card-sizing card card-background center-align">
                <div class="card-image waves-effect waves-block waves-light card-overflow">
                    {% if not movie.movie_image or movie.movie_image == "" %}
                    <img class="activator" src="{{ url_for('static', filename='images/movie-icon.png') }}">
                    {% else %}
                    <img class="activator" src="{{ movie.movie_image }}">
                    {% endif %}

                    {% if session.user|lower == movie.created_by|lower or session.is_admin %}
                    <a class="btn-edit btn-floating halfway-fab waves-effect waves-light cyan lighten-1" href="{{ url_for('edit_movie', movie_id=movie._id) }}"><i class="material-icons">edit</i></a>
                    <!-- Delete Modal -->
                    <a class="btn-delete modal-trigger btn-floating halfway-fab waves-effect waves-light red lighten-1" href="#modal{{movie._id}}"><i class="material-icons">delete</i></a>
                    {% endif %}

                </div>
                <div class="card-content">
                    <span class="card-title activator">{{ movie.movie_name }}</span>
                    <div id="modal{{movie._id}}" class="modal">
                        <div class="modal-content">
                        <h5>Are you sure want to delete this movie?</h5>
                        </div>
                        <div class="modal-footer">
                        <a href="{{ url_for('delete_movie', movie_id=movie._id) }}" class="modal-close btn cyan lighten-1 black-text">Yes</a>
                        <a href="#!" class="modal-close btn-flat red lighten-1 black-text">No</a>
                        </div>
                    </div>
                </div>
                <div class="card-reveal card-text">
                    <span class="card-title"><i class="material-icons right">close</i>
                        <strong><a href="{{ movie.movie_link }}" target="_blank">{{ movie.movie_name }}</a></strong> <br><br>
                        <p class="card-reveal-info"><i class="fas fa-theater-masks prefix cyan-text lighten-1"></i> {{ movie.category_name }}</p>
                        <p class="card-reveal-info"><i class="fas fa-calendar-alt prefix cyan-text lighten-1"></i> {{ movie.year }}</p>
                        <p class="card-reveal-info"> <i class="fas fa-clock prefix cyan-text lighten-1"></i> {{ movie.movie_duration }} min</p>
                        <p class="card-reveal-info"><i class="fas fa-book prefix cyan-text lighten-1"></i> 
                                                    <a href="{{ movie.book_link }}" class="collection-item" target="_blank">Book link</a></p>
                        <p class="card-reveal-description">{{ movie.movie_description }}</p>
                        <p class="card-reveal-info"><em>added by: {{ movie.created_by }}</em></p>
                    </span>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</main>
{% endblock %}